<!DOCTYPE html>                                                                                                                                                                   
<html>
<head>
  <!-- Include meta tag to ensure proper rendering and touch zooming -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Include jQuery Mobile stylesheets -->
  <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
  <!-- Include the jQuery library -->
  <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
  <!-- Include the jQuery Mobile library -->
  <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <script src="https://code.jquery.com/ui/1.11.3/jquery-ui.js"></script></script>

<script> 
var barod_left;
var board_right;

$(document).ready(function(){
    var ds = ["#d1", "#d2", "#d3"];
    var i = 0;
    $("#next_btn").click(function() {
        next_problem(ds, i);
        if (i == ds.length - 1) {
            i = 0;
        } else {
            i++;
        }
    });

    $("#btn1").click(leftkid_fadein);
    $("#btn4").click(function() {
        var board_width = $("#board").width();
        rightkid_fadein(board_left + board_width/2);
    });

    $(window).on('resize', function(event){
        board_left = $("#board").position().left;
        board_right = $("#board").position().right;
        change_fruit(ds, board_left);
    });
    board_left = $("#board").position().left;
    board_right = $("#board").position().right;
    change_fruit(ds, board_left);

});

function change_fruit(ds, board_left) {
    var board_top = $("#board").position().top;
    var board_width = $("#board").width();
    var board_height = $("#board").height();
    $.each(ds, function( index, value ) {
        $(ds[index]).css({ top: board_top, left:board_left, width:board_width, height:board_height});
    });
    $("#leftkid").css({ top: board_top, left:board_left, width:board_width/2, height:board_height});
    $("#rightkid").css({ top: board_top, left: board_left + board_width/2 ,width:board_width/2, height:board_height});
}

function leftkid_fadein() {
    $(".background").css("opacity", ".4");
    var cur = $("#leftkid").position().left; //current left
    $("#leftkid").css({ left: cur - 200 });
    $("#leftkid").show().animate({ left:cur }, {duration: 1000, easing: 'easeOutElastic'});
    //run after a while
    setTimeout(function() {
        $( "#leftkid" ).fadeOut();
        $(".background").css("opacity", "1");
    }, 2000 );
}

function rightkid_fadein(kid_left) {
    $(".background").css("opacity", ".4");
    $("#rightkid").css({ left: kid_left + 200 });
    $("#rightkid").hide().show().animate({left: kid_left}, {duration: 1000, easing: 'easeOutElastic'});
    //run after a while
    setTimeout(function() {
        $( "#rightkid" ).fadeOut();
        $(".background").css("opacity", "1");
    }, 2000 );
}

function next_problem(ds, i){
    $(ds[i]).fadeOut('fast').animate({
        'left': '100%'
        }, {duration: 'slow', queue: false}, function() {
        // Animation complete.
    });

    if (i == ds.length - 1) {
        i = 0;
    } else {
        i++;
    }

    $(ds[i]).css({ left:-200 });
    $(ds[i]).show().animate({ left:board_left }, {duration: 1200, easing: 'easeOutBounce'});
}
</script> 

</head>
<body>

<div data-role="page" id="pageone">
  <div data-role="header">
  <h1>Welcome To My Homepage</h1>
  </div>

  <div data-role="main" class="ui-content" style="padding-top: 0px;">
    <div class="background" style="text-align: center;"><img id="board" src="img/board.png" width="90%" ></div>
    <div id="d1"  class="background" style="position:absolute;"><img src="img/fruit1.png" width="100%" ></div>
    <div id="d2"  class="background" style="position:absolute;display:none;"><img src="img/fruit2.png" width="100%" ></div>
    <div id="d3"  class="background" style="position:absolute;display:none;"><img src="img/fruit3.png" width="100%" ></div>

    <div id="leftkid" style="position:absolute;display:none;"><img src="img/1-1.png"  width="100%"></div>
    <div id="rightkid" style="position:absolute;display:none;"><img src="img/1-2.png"  width="100%"></div>

    <div class="ui-grid-c">
      <div class="ui-block-a">
        <a href="#" id="btn1" class="ui-btn ui-corner-all ui-shadow">11</a><br>
      </div>
      <div class="ui-block-b">
        <a href="#" id="btn2" class="ui-btn ui-corner-all ui-shadow">12</a><br>
      </div>
      <div class="ui-block-c">
        <a href="#" id="btn3" class="ui-btn ui-corner-all ui-shadow">13</a><br>
      </div>
      <div class="ui-block-d">
        <a href="#" id="btn4" class="ui-btn ui-corner-all ui-shadow">14</a><br>
      </div>
    </div>

    <div class="ui-grid-solo">
        <div class="ui-block-a"><a id="next_btn" href="#" class="ui-btn ui-corner-all ui-shadow">Next</a></div>
    </div>

  </div>

  <div data-role="footer">
    <h1> Good Job! </h1>
  </div>
</div> 

</body>
