<!DOCTYPE html>                                                                                                                                                                   
<html>
<head>
<title>count game</title>
  <!-- Include meta tag to ensure proper rendering and touch zooming -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Include jQuery Mobile stylesheets -->
  <!-- <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"> -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/style.css">
   
  <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
  <!-- Include the jQuery Mobile library -->
  <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <script src="https://code.jquery.com/ui/1.11.3/jquery-ui.js"></script></script>
  <!-- <script src="js/game.js"></script> -->
<script> 
var barod_left;
var board_right;

$(document).ready(function(){
    var ds = ["#d1", "#d2", "#d3"];
    var correct_answer = ["10","8", "12"];
    var i = 0;
    $("#next_btn").click(function() {
        next_problem(ds, i);
        if (i == ds.length - 1) {
            i = 0;
        } else {
            i++;
        }
    });

    $(".answer_btn").click(function(e) {
        if ($(e.target).text() == correct_answer[i]) {
            leftkid_fadein();
        } else {
            var board_width = $("#board").width();
            rightkid_fadein(board_left + board_width/2);
        }
    });

    $(window).on('resize', function(event){
        board_left = $("#board").position().left;
        board_right = $("#board").position().right;
        change_fruit(ds, board_left);
    });
    board_left = $("#board").position().left;
    board_right = $("#board").position().right;
    change_fruit(ds, board_left);

});

function change_fruit(ds, board_left) {
    var board_top = $("#board").position().top;
    var board_width = $("#board").width();
    var board_height = $("#board").height();
    $.each(ds, function( index, value ) {
        $(ds[index]).css({ top: board_top, left:board_left, width:board_width, height:board_height});
    });
    $("#leftkid").css({ top: board_top, left:board_left, width:board_width/2, height:board_height});
    $("#rightkid").css({ top: board_top, left: board_left + board_width/2 ,width:board_width/2, height:board_height});
}

function leftkid_fadein() {
    $(".background").css("opacity", ".4");
    var cur = $("#leftkid").position().left; //current left
    $("#leftkid").css({ left: cur - 200 });
    $("#leftkid").show().animate({ left:cur }, {duration: 1000, easing: 'easeOutElastic'});
    //run after a while
    setTimeout(function() {
        $( "#leftkid" ).fadeOut();
        $(".background").css("opacity", "1");
    }, 2000 );
}

function rightkid_fadein(kid_left) {
    $(".background").css("opacity", ".4");
    $("#rightkid").css({ left: kid_left + 200 });
    $("#rightkid").hide().show().animate({left: kid_left}, {duration: 1000, easing: 'easeOutElastic'});
    //run after a while
    setTimeout(function() {
        $( "#rightkid" ).fadeOut();
        $(".background").css("opacity", "1");
    }, 2000 );
}

function next_problem(ds, i){
    $(ds[i]).fadeOut('fast').animate({
        'left': '100%'
        }, {duration: 'slow', queue: false}, function() {
        // Animation complete.
    });

    if (i == ds.length - 1) {
        i = 0;
    } else {
        i++;
    }

    $(ds[i]).css({ left:-200 });
    $(ds[i]).show().animate({ left:board_left }, {duration: 1200, easing: 'easeOutBounce'});
}
</script> 

</head>
<body>

  <div class="frame" data-role="page" id="pageone">
   
  
    <div data-role="main" class="ui-content" >
       
          <div class="background" style="text-align: center;"><img id="board" src="img/board.png" width="90%" ></div>
          <div id="d1"  class="background" style="position:absolute;"><img src="img/fruit1.png" width="100%" ></div>
          <div id="d2"  class="background" style="position:absolute;display:none;"><img src="img/fruit2.png" width="100%" ></div>
          <div id="d3"  class="background" style="position:absolute;display:none;"><img src="img/fruit3.png" width="100%" ></div>
      
    <div id="leftkid" style="position:absolute;display:none;"><img src="img/1-1.png"  width="100%"></div>
    <div id="rightkid" style="position:absolute;display:none;"><img src="img/1-2.png"  width="100%"></div>



<div class="row btn-group btn">
      <div class="col-xs-3">
      <a href="#" id="btn1" class="action-button shadow animate blue answer_btn">10</a>
      </div>
       <div class="col-xs-3">
       <a href="#" id="btn2" class="action-button shadow animate red answer_btn">8</a>
       </div>
        <div class="col-xs-3">
       <a href="#" id="btn3" class="action-button shadow animate green answer_btn">12</a>
       </div>
        <div class="col-xs-3">
       <a href="#" id="btn4" class="action-button shadow animate yellow answer_btn">15</a>
       </div>
</div>
  
<div class="ui-grid-solo">
        <div class="ui-block-a"><a id="next_btn" href="#" class="btn btn-primary btn-lg active">Next step</a></div>
    </div>

  </div> <!-- End of #pageone -->

</body>
